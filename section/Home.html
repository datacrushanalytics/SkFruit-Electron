<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title></title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
    }

    .hero-section {
      flex: 1;
      display: flex;
    }



    /* Styles for the header */
h3 {
  cursor: pointer; /* Changes cursor to a hand when hovering over the header */
  display: flex; /* Makes the header content align horizontally */
  align-items: center; /* Aligns items vertically in the center */
  font-size: 24px; /* Sets font size */
  color: #fff; /* Sets text color */
  margin-left: 33%;
}

h3 img {
  width: 13%; /* Sets the width of the logo image */
  height: 13%; /* Sets the height of the logo image */
  border-radius: 50%; /* Makes the logo image rounded */
  margin-right: 5%;
}

    #sidebar-container {
      width: 20%; /* Occupy 1/5 of the page */
      background-color: #333;
      color: white;
      padding: 20px;
      z-index: 999; /* Ensure sidebar is above other content */
      overflow-y: auto; /* Add scrollbar to sidebar */
      height: 100vh; /* Set sidebar height to full viewport height */
    }

    #main-container {
      flex: 4; /* Occupy remaining width */
      overflow: hidden; /* Hide overflowing content */
      position: relative; /* Set position to relative */
    }

    #pageContent {
      width: 100%; /* Set iframe width to 100% */
      height: 100%; /* Set iframe height to 100% */
      position: absolute; /* Position iframe absolutely */
      top: 0; /* Align iframe to the top */
      left: 0; /* Align iframe to the left */
      border: none; /* Remove iframe border */
    }

    .component {
      height: 35px;
      width: 100%; /* Adjust to fill the sidebar */
      cursor: pointer;
      margin-bottom: 10px;
      color: #fff;
      background-color: #555;
      padding: 10px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    .component.active {
      background-color:darkgray; /* Red color for active button */
    }

    .component:hover {
      background-color: #777;
    }

    .logout {
      height: 35px;
      width: 100%;
      cursor: pointer;
      margin-top: 20px;
      color: #fff;
      background-color: #c0392b; /* Red color for logout button */
      padding: 10px;
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    .logout:hover {
      background-color: #e74c3c; /* Darker red color on hover */
    }

    @media (max-width: 768px) {
      /* Adjust as needed */
      #sidebar-container {
        width: auto; /* Adjust sidebar width for smaller screens */
        padding-bottom: 20px; /* Add some space at the bottom */
      }
    }
  </style>
</head>

<body>
  <div class="hero-section">
    <div id="main-container">
      <iframe id="pageContent" src="./Menu.html" frameborder="0"></iframe>
    </div>
    <div id="sidebar-container">
      <h3 onclick="openPage('home')">
          <img src="../../assets/img/logo.png" alt="Company Logo">
        SK Fruit
      </h3>
      <!-- <button class="component" onclick="openPage('user')">User</button>
      <button class="component" onclick="openPage('product')">Product</button>
      <button class="component" onclick="openPage('account')">Account</button>
      <button class="component" onclick="openPage('vehicle')">Vehicle</button>
      <button class="component" onclick="openPage('route')">Route</button>
      <button class="component" onclick="openPage('purchase')">Purchase</button>
      <button class="component" onclick="openPage('sale3')">Sale</button>
      <button class="component" onclick="openPage('barcode')">Barcode</button>
      <button class="component" onclick="openPage('receipt')">Reciept</button>
      <button class="component" onclick="openPage('payment')">Payment</button>
      <button class="component" onclick="openPage('purchaseReport')">Purchase Report</button>
      <button class="component" onclick="openPage('routewiseSaleReport')">Routewise Sale Report</button>
      <button class="component" onclick="openPage('stockReport')">Stock Report</button>
      <button class="component" onclick="openPage('khatawani')">Khatawani</button>
      <button class="component" onclick="openPage('batawiseSaleReport')">batawiseSaleReport</button>
      <button class="component" onclick="openPage('dailyReport')">Daily Report</button>
      <button class="component" onclick="openPage('receiptReport')">Receipt Report</button>
      <button class="component" onclick="openPage('ledgerReport')">Ledger Report</button>
      <button class="component" onclick="openPage('customerOutstanding')">Customer Outstanding</button>
      <button class="component" onclick="openPage('supplierOutstanding')">Supplier Outstanding</button>
      <button class="component" onclick="openPage('carateReport')">Carate Report</button>
      <button class="component" onclick="openPage('remainder')">Remainder</button>
      <button class="component" onclick="openPage('profitLossReport')">Profit Loss Report</button>  -->
      <!-- Add other buttons here -->
      <!-- <a href="../section/Log_in.html"><button type="button" class="logout" onclick="login()">Log Out</button></a> -->
    </div>
  </div>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Retrieve user data from localStorage
        var sessionData = JSON.parse(localStorage.getItem('sessionData'));
        var isAdmin = sessionData && sessionData[0].usertype === 'Admin';

        console.log(localStorage.getItem('sessionData'))
        console.log(sessionData[0].usertype)
        // Fetch data from API and dynamically generate buttons
        fetch("http://localhost:3000/accessconfigData")
        .then(response => response.json())
        .then(data => {
          var sidebarContainer = document.getElementById('sidebar-container');
          // data.forEach(menu => {
            //if (isAdmin || menu.status === 'active') {
              //var button = document.createElement('button');
              // button.classList.add('component');
              // button.textContent = menu.name;
              // button.onclick = function() {
              //   openPage(menu.name);
            // };

            //sidebarContainer.appendChild(button);
          //}

          data.forEach(menu => {
            if (isAdmin || menu.status === 'active') {
              var button = document.createElement('button');
              button.classList.add('component');
              button.textContent = menu.name;
              button.onclick = handleButtonClick; // Use the handleButtonClick function
              sidebarContainer.appendChild(button);
            }
     



          });

          // Add logout button at the bottom
        var logoutButton = document.createElement('button');
        logoutButton.href = "../section/Log_in.html";
        logoutButton.classList.add('logout');
        logoutButton.textContent = "Log Out";
        logoutButton.onclick = function() {
          localStorage.removeItem('sessionData');
          window.location.href = "../section/Log_in.html";
        };
        sidebarContainer.appendChild(logoutButton);


        })
        .catch(error => {
          console.error("Error fetching data:", error);
        });
      });
    </script>
  

  <script>
    function openPage(pageName) {
      var pageUrl;
      switch (pageName) {
        case 'home':
          pageUrl = './Menu.html';
          break;
        case 'user':
          pageUrl = "./user/user.html";
          break;
          case 'product':
          pageUrl = './product/product.html';
          break;
        case 'account':
          pageUrl = './account/account.html';
          break;
        case 'route':
          pageUrl = './route/Root_Details.html';
          break;
        case 'purchase':
          pageUrl = './purchase/Purchase.html'
          break;
        case 'sale3':
          pageUrl = './sale/sale3.html'
          break;
        case 'vehicle':
          pageUrl = './vehicle/Vehicle_Details.html'
          break;
        case 'barcode':
          pageUrl = './barcode/barcode.html'
          break;
        case 'receipt':
          pageUrl = './receipt/Receipt.html'
          break;
        case 'payment':
          pageUrl = './payment/Payment.html'
          break;
        case 'purchaseReport':
          pageUrl = '../report/purchaseReport/purchaseReport.html'
          break;
        case 'routewiseSaleReport':
          pageUrl = '../report/routewiseSaleReport/routewiseSaleReport.html'
          break;
        case 'stockReport':
          pageUrl = '../report/stockReport/stockReport.html'
          break;
        case 'batawiseSaleReport':
          pageUrl = '../report/batawiseSaleReport/batawiseSaleReport.html'
          break;
        case 'khatawani':
          pageUrl = '../report/khatawani/khatawani.html'
          break;
        case 'dailyReport':
          pageUrl = '../report/dailyReport/dailyReport.html'
          break;
        case 'receiptReport':
          pageUrl = '../report/receiptReport/receiptReport.html'
          break;
        case 'ledgerReport':
          pageUrl = '../report/ledgerReport/ledger.html'
          break;
        case 'customerOutstanding':
          pageUrl = '../report/customerOutstanding/customerOutstanding.html'
          break;
        case 'supplierOutstanding':
          pageUrl = '../report/supplierOutstanding/supplierOutstanding.html'
          break;
        case 'carateReport':
          pageUrl = '../report/carateReport/carateReport.html'
          break;
        case 'remainder':
          pageUrl = '../report/remainder/remainder.html'
          break;
        case 'profitLossReport':
          pageUrl = '../report/profitLossReport/profit_loss_report.html'
          break;
          // Add other cases as needed
        default:
          pageUrl = './Home2.html';
      }
      document.getElementById('pageContent').src = pageUrl;

      // Remove active class from all buttons
      // var buttons = document.querySelectorAll('.component');
      // buttons.forEach(function(button) {
      //  button.classList.remove('active');
      // });

      // Add active class to the clicked button
      // var clickedButton = document.querySelector('[onclick="openPage(\'' + pageName + '\')"]');
      // clickedButton.classList.add('active');
    }

    function handleButtonClick(event) {
      // Remove active class from all buttons
      var buttons = document.querySelectorAll('.component');
      buttons.forEach(function(button) {
        button.classList.remove('active');
      });
    
      // Add active class to the clicked button
      event.target.classList.add('active');
    
      // Retrieve the page name from the clicked button's text content
      var pageName = event.target.textContent;
      
      // Call the openPage function with the page name
      openPage(pageName);
    }
    
    

  </script>
</body>

</html>
